moti.holzman
eliran.laor



=============================
=      File description     =
=============================
ex4jar contains files that implement an AVL tree.

Node.java - a class implementing a node in a tree. Every node has two "child" nodes - the left son and the
right son. Also, every node has three main attributes: "value", height" and "balanceFactor"; "value" is the
value that the node is representing, height is defined as the number of nodes between the root and its
furthest leaf, and the balanceFactor is defined as the left son's height minus the right son's height.
All the above can be reached and changed by getters and setters implemented in the class.

TreeIteratorWrapper.java - a class implementing iterator. The class will be the returned Iterator object of
the AVL tree class.

AvlTree.java - a class implementing the AVL tree. The class will hold the root node of the tree and will
support all avl tree actions, including: add, remove ,contains, size etc. Note that the AVL class will support
the runtime complexity of an avl tree - i.e. add, delete and contain will take O(log(n)) where n in the size
of the tree.


=============================
=          Design           =
=============================
The design of the classes is as follows:
The AvlTree class HAS a Node and implements Iterable.
In this design, all nodes hold their height and balance factor as expected in an AVL tree; This way, the
AvlTree class has to only hold one node - being the root of the tree.


=============================
=  Implementation details   =
=============================
AvlTree - the main implementation topics of this class are the add and remove functions.

add function: the add function checks if the tree already contains the inputted value - if it doesn't we call
the addAndFix helper function that we deal with adding and re-balancing the tree.
the main flow of the add function works with a recursive binary search in the tree to find the
correct spot to add the received value (assuming it isn't already there). When finding the correct spot, we
create and add a node in that place, holding the value. After adding the node all we have to do is to update
the heights of the nodes and re-balance the tree when needed. For that purpose, we use helper functions when
backtracking the recursion; we use the following helper functions:
updateHeightAndBalanceFactor(Node root) - this function will receive a node and update it's height and
balanceFactor.
checkAndRotate(Node root) - this function receives a node and checks weather or not it "breaks" the AVL tree
conditions. If it does - the function uses four more helper functions created to handel the rotations - using
the conditions discussed in DAST.
After finishing the recursion, all relevant nodes will be updated and re-balanced and the main add function
will return true.

delete function: the delete function first check weather or not the value received is already in the tree. If
it isn't we return false and it it it we call the deleteAndFix helper function. Like the add helper function,
this function will use a binary search recursion to find the node that hold the value we want to delete. Upon
finding the node, there are three cases:
case 1 - the node has no children: in this case, we set his father's son node to point to null.
case 2 - the node has 1 child, either left or right: we replace the node's value with his son's and delete the
son.
case 3 - the node has more than 2 children (he is the root of a tree with a size > 3), we update the node's
value with his successor (the smallest value that is bigger than his value), and call the deleteAndFix
function again, deleting the successor. After deleting the successor, just like the add function, we backtrack
from the successor node back up the recursion while updating heights and balance factors of all nodes on the
way - using the same helper functions used in the add method.

in conclusion, the helper function used by both add and delete methods are:
updateHeightAndBalanceFactor
checkAndRotate
and the functions not used by both are addAndFix and deleteAndFix.


